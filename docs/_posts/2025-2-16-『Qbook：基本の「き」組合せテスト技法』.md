---
layout: post
title:  "読書メモ：『基本の「き」組合せテスト技法』"
date:   2025-2-16 18:30:11 +0900
categories: テスト
---

# 概要
テストケース数の削減に効果の高い技法
実際に効果を上げるにはかなりハードルが高い技法

## 組み合わせテスト技法の魅力
- いくつかのパラメータの組合せによって起こる不具合を発見できる
- テスト数の削減

## 因子・水準とｎ因子間網羅
- 因子・水準：設定項目・設定値
- ｎ因子間網羅：組み合わせかた

### 因子・水準の例
- 因子(テスト対象における機能や設定項目、パラメータ)
  - 水準（因子の中の選択肢、設定値、設定内容）
- OS
  - Windows10, 11, MacOS

## 組み合わせ方（2因子間網羅の例）
2因子間網羅は、複数ある因子の中でどの2つの因子を見ても、全網羅する組み合わせ

スイッチ3つの場合の全網羅ケース（8ケース必要）
| -- | スイッチ1 | スイッチ2 | スイッチ3 | 
| -- | -- | -- | -- |
| ケース1 | ON | ON | ON |
| ケース2 | ON | ON | OFF |
| ケース3 | ON | OFF | ON |
| ケース4 | ON | OFF | OFF |
| ケース5 | OFF | ON | ON |
| ケース6 | OFF | ON | OFF |
| ケース7 | OFF | OFF | ON |
| ケース8 | OFF | OFF | OFF |

これを2因子間網羅にすると...4ケースに削減される
| -- | スイッチ1 | スイッチ2 | スイッチ3 | 
| -- | -- | -- | -- |
| ケース1 | ON | ON | ON |
| ケース2 | ON | OFF | OFF |
| ケース3 | OFF | ON | OFF |
| ケース4 | OFF | OFF | ON |

この時、全スイッチ（1,2,3）の中のどの2因子間でも全網羅されている
- スイッチ1, 2 の2因子間で全網羅
- スイッチ2, 3 の2因子間で全網羅
- スイッチ3, 1 の2因子間で全網羅

ただし、**全部OFFという項目がない**ことに注意!!
3因子間以上では網羅されていない。

### POINT!!
「何がテストできて」「何がテストできないのか」「どんなリスクであるのか？」を把握すること!!

重要なテストケースは追加テストすること!!
- 漏れるケースの中にテスト優先順位の高いテストケースがあった場合、2因子間網羅テストとは別に特別にケアする


**テスト優先順位の高いテストケース**
たとえば、以下の考え方でも優先度がわかる
- 機能の重要度(利用頻度が多い、特に重要な機能、など) x 観点の重要度(不具合発生時のリスクが高い、など)

### memo：なぜ2因子間網羅？
2因子間の組合せによる不具合が、組込み系の場合は97％を占めるという研究結果があるらしい
(D. R. Kuhn, D. R. Wallace and A. M. Gallo Jr., ”Software Fault Interactions and Implications for  Software Testing”, IEEE Transactions on Software Engineering, Vol.30, No.6, 2004 
**Web系だと2因子間では76％、3因子間で95％**)

また、直交表やPair-wise法をを利用する場合、3因子以上となるとテストケースが多くなり、また組み合わせ方が複雑となるため実用的でなくなるため

## 直交表とAll-Pairs法(Pair-wise)

### 直交表
2因子間網羅の場合、因子数+1がテストケース数となる。
「Ln直交表の場合、因子数はn-1」と表現されたりする。

さきほどの例でスイッチ数が3に対して、テストケース数は4になっている。

**疑問**
ただ、水準数は2の場合だけだよね...???

### Pair-wise
直交表との違いは、**因子・水準数による制約がない** !!

2因子間網羅に特化してテストケース数を減らしている。つまり、組み合わせの出現回数が少ない。
3因子以上となると直交表の方が網羅性が高くなる。（3因子間網羅テストでも、4因子間の網羅性がある程度ある）

pari-wiseに使えるツール：https://www.qbook.jp/info-qumias/

### どちらの手法がよいか、どうやって選ぶのか？

- わからなければ、pair-wise から（とっかかり程度の意識で）
- 水準数がバラバラの場合は pair-wise 
- 3因子間以上の網羅性が必要なら、直交表

## 忘れてはいけないこと
組み合わせテスト技法は、必ずテスト漏れのリスクがある。
（必要性の低そうなテストケースを削ぎ落とす技法だから）

なので、
- 新機能に関しては時間をかけて全網羅テストを実施する
- リグレッションテストは、組み合わせテストを適用する
といった感じで、柔軟な適用が望ましい

### 流れのおさらい
- テスト対象に関する因子・水準の洗い出し
  - 因子・水準表を作成する
  - レビューも受けようね
- 組み合わせテスト技法を適用するか、全網羅テストにするか？
- 適用対象となる因子・水準を決定する
- 使用する組み合わせテスト技法を決定する


