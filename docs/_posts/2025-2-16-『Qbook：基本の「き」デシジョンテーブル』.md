---
layout: post
title:  "読書メモ：『Qbook：基本の「き」デシジョンテーブル』"
date:   2025-2-16 20:19:11 +0900
categories: テスト
---

## 概要
どのような条件のときに、どのような動作結果となるのかを表敬式で表す方法

複雑に絡み合う様々な条件を整理することで、条件に応じたソフトウェアの動作が理解しやすくなる

## デシジョンテーブルとは

こんなやつ
**表.1**
| -- | ルール | 1 | 2 | 3 | 4 |
| -- | -- | -- | -- | -- | -- |
| 条件 | 平日（祝祭日除く） | Y | Y | N | N |
|  | 7:00 - 21:59 | Y | N | Y | N |
| 動作 | 通常料金 | x | - | - | - |
|  | 割増料金 | - | x | x | x |

## デシジョンテーブルからテストケースをおこすには

デシジョンテーブルを左に90度回転させる
- ルール：テストケース
- 条件：そのまま
- 動作：期待する結果

### 工夫が必要なポイント
日時の条件については可能な限り丁寧に表現する必要がある
- 操作手順を記載する場合は操作タイミングの明記が必要
  - 操作を開始した時点か？ 操作が完了して処理が開始した時点か？ など

## デシジョンテーブルが大きくなりすぎたら？

読みにくくなったり、テストできない大きさになっては本末顛倒
できるだけ小さくする必要がある

### tips.1 : 記号以外の表現も検討する

条件指定部・動作指定部は記号以外で表してもいい。（以下の例が見やすいとは言っていない。ただの例）

**表.2**
| -- | ルール | 1 | 2 | 3 | 4 |
| -- | -- | -- | -- | -- | -- |
| 条件 | 平日（祝祭日除く） | Y | Y | N | N |
|  | 現在時刻 | x between 7:00 and 21:59 | (x between 00:00 AND 7:00) OR 22:00 <= x | x between 7:00 and 21:59 | (x between 00:00 AND 7:00) OR 22:00 <= x |
| 動作 | 割増料金 | 0円 | 200円 | 200円 | 200円 |

### tips.2 : 条件を圧縮する

結果に影響しない条件があったら、圧縮してしまう。
以下の例だと、平日以外の場合は時間帯に関係がないので圧縮した例
（表.2 との比較で見ること）

**表.3**
| -- | ルール | 1 | 2 | 3 |
| -- | -- | -- | -- | -- |
| 条件 | 平日（祝祭日除く） | Y | Y | N|
|  | 現在時刻 | x between 7:00 and 21:59 | (x between 00:00 AND 7:00) OR 22:00 <= x | DC |
| 動作 | 割増料金 | 0円 | 200円 | 200円 |

### tips.3 : 関連性の低い条件は別テーブルにする

## デシジョンテーブル作成後の確認ポイント

### ヨコの確認
同じ条件が現れていないか？
元にした仕様書などドキュメントがある場合、発生しがち。

まずはドキュメントに対して素直にデシジョンテーブルを記述して、チェック・調整して、レビューしてもらう。

### タテの確認
矛盾する条件がないか？
実際には起こり得ない条件を書いてしまっていないか？

日時条件が複数ある場合など、"現在時刻: AM10:00" でかつ"時間帯:夜間" のような矛盾が発生しうる。

### 各ルールの前提条件は一緒か？
デシジョンテーブルはすべてのルールの前提条件が揃っていること

もし別のルールの動作結果から影響を受ける前提の場合、それは別のテーブルに分ける。


